<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/mobile-head :: headMobile(${titulo})}"></head>
<body class="mobile-body">
<div class="mobile-shell">
    <header class="mobile-header">
        <a class="mobile-botao-icone" th:href="@{/pessoas}" aria-label="Voltar">&#8592;</a>

        <div class="mobile-header-titulo">
            <p class="mobile-header-subtitulo">Cadastro de pessoa</p>
            <h1 th:text="${titulo}">Nova Pessoa</h1>
        </div>

        <div class="mobile-header-acoes">
            <button id="alternadorTema" type="button" class="mobile-botao">Ativar tema escuro</button>
            <form th:action="@{/logout}" method="post">
                <button type="submit" class="mobile-link-btn">Sair</button>
            </form>
        </div>
    </header>

    <main class="mobile-main">
        <section class="mobile-cartao">
            <h2 class="mobile-cartao-titulo">Cadastro de pessoa</h2>
            <p class="mobile-cartao-subtitulo">Nome e CPF sao obrigatorios.</p>

            <form class="mobile-form" th:object="${form}" method="post"
                  th:action="${acao == 'salvar'} ? @{/pessoas/salvar} : @{/pessoas/{id}/atualizar(id=${pessoa.id})}">

                <section>
                    <h3 class="mobile-secao-titulo">Dados pessoais</h3>
                    <hr class="mobile-separador">
                    <div class="mobile-form-grid">
                        <div class="mobile-form-group mobile-form-group--coluna-inteira">
                            <label for="nome">Nome *</label>
                            <input id="nome" th:field="*{nome}" class="mobile-input texto-maiusculo" required>
                            <p class="mobile-erro" th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></p>
                        </div>

                        <div class="mobile-form-group">
                            <label for="cpf">CPF *</label>
                            <input id="cpf" th:field="*{cpf}" class="mobile-input mask-cpf" data-digits-only="true" required>
                            <p class="mobile-erro" th:if="${#fields.hasErrors('cpf')}" th:errors="*{cpf}"></p>
                        </div>

                        <div class="mobile-form-group">
                            <label for="cepPessoa">CEP</label>
                            <input id="cepPessoa" th:field="*{cep}" class="mobile-input mask-cep" data-digits-only="true">
                        </div>
                    </div>
                </section>

                <section>
                    <h3 class="mobile-secao-titulo">Endereco</h3>
                    <hr class="mobile-separador">
                    <div class="mobile-form-grid">
                        <div class="mobile-form-group mobile-form-group--coluna-inteira">
                            <label for="logradouroPessoa">Logradouro</label>
                            <input id="logradouroPessoa" th:field="*{logradouro}" class="mobile-input texto-maiusculo">
                        </div>

                        <div class="mobile-form-group">
                            <label for="numeroPessoa">Numero</label>
                            <input id="numeroPessoa" th:field="*{numero}" class="mobile-input texto-maiusculo">
                        </div>

                        <div class="mobile-form-group">
                            <label for="complementoPessoa">Complemento</label>
                            <input id="complementoPessoa" th:field="*{complemento}" class="mobile-input texto-maiusculo">
                        </div>

                        <div class="mobile-form-group">
                            <label for="referenciaPessoa">Referencia</label>
                            <input id="referenciaPessoa" th:field="*{referencia}" class="mobile-input texto-maiusculo">
                        </div>

                        <div class="mobile-form-group">
                            <label for="bairroPessoa">Bairro</label>
                            <input id="bairroPessoa" th:field="*{bairro}" class="mobile-input texto-maiusculo">
                        </div>

                        <div class="mobile-form-group">
                            <label for="cidadePessoa">Cidade</label>
                            <input id="cidadePessoa" th:field="*{cidade}" class="mobile-input texto-maiusculo">
                        </div>

                        <div class="mobile-form-group">
                            <label for="estadoPessoa">Estado</label>
                            <input id="estadoPessoa" th:field="*{estado}" maxlength="2" class="mobile-input texto-maiusculo">
                        </div>
                    </div>
                </section>

                <section>
                    <h3 class="mobile-secao-titulo">Contato e regras</h3>
                    <hr class="mobile-separador">
                    <div class="mobile-form-grid">
                        <div class="mobile-form-group">
                            <label for="celularPessoa">Celular</label>
                            <input id="celularPessoa" th:field="*{celular}" class="mobile-input mask-celular"
                                   data-digits-only="true">
                        </div>

                        <div class="mobile-form-group">
                            <label for="whatsappPessoa">Whatsapp</label>
                            <input id="whatsappPessoa" th:field="*{whatsapp}" class="mobile-input mask-celular"
                                   data-digits-only="true">
                            <label class="mobile-checkbox" for="whatsappMesmoCelular">
                                <input type="checkbox" id="whatsappMesmoCelular">
                                Mesmo numero do celular
                            </label>
                        </div>

                        <div class="mobile-form-group mobile-form-group--coluna-inteira">
                            <label for="email">E-mail</label>
                            <input id="email" th:field="*{email}" type="email" class="mobile-input" data-no-uppercase="true">
                            <p class="mobile-erro" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></p>
                        </div>

                        <div class="mobile-form-group">
                            <label for="jurosMensal">Juros mensal (%)</label>
                            <input id="jurosMensal" th:field="*{jurosMensal}" type="number" step="0.0001" min="0"
                                   class="mobile-input">
                            <p class="mobile-erro" th:if="${#fields.hasErrors('jurosMensal')}" th:errors="*{jurosMensal}"></p>
                        </div>

                        <div class="mobile-form-group">
                            <label for="multaAtraso">Multa por atraso (%)</label>
                            <input id="multaAtraso" th:field="*{multaAtraso}" type="number" step="0.0001" min="0"
                                   class="mobile-input">
                            <p class="mobile-erro" th:if="${#fields.hasErrors('multaAtraso')}" th:errors="*{multaAtraso}"></p>
                        </div>
                    </div>
                </section>

                <div class="mobile-acoes">
                    <button class="mobile-botao mobile-botao-primario" type="submit">Salvar</button>
                    <a class="mobile-botao" th:href="@{/pessoas}">Cancelar</a>
                </div>
            </form>
        </section>
    </main>

    <nav th:replace="~{fragments/mobile-rodape :: menu('pessoas')}"></nav>
</div>
<script th:src="@{/js/app.js}"></script>
</body>
</html>
