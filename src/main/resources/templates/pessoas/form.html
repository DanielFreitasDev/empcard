<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head(${titulo})}"></head>
<body>
<div class="app-shell">
    <header th:replace="~{fragments/navbar :: navbar}"></header>

    <main class="layout-content">
        <section class="card">
            <h1 class="page-title" th:text="${titulo}">Pessoa</h1>
            <p class="page-subtitle">Apenas nome e CPF são obrigatórios.</p>

            <form th:object="${form}" method="post"
                  th:action="${acao == 'salvar'} ? @{/pessoas/salvar} : @{/pessoas/{id}/atualizar(id=${pessoa.id})}">
                <div class="grid grid-2" style="margin-top: 0.85rem;">
                    <div class="form-group">
                        <label for="nome">Nome *</label>
                        <input id="nome" th:field="*{nome}" class="form-control texto-maiusculo" required>
                        <small class="error-text" th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></small>
                    </div>

                    <div class="form-group">
                        <label for="cpf">CPF *</label>
                        <input id="cpf" th:field="*{cpf}" class="form-control mask-cpf" data-digits-only="true"
                               required>
                        <small class="error-text" th:if="${#fields.hasErrors('cpf')}" th:errors="*{cpf}"></small>
                    </div>

                    <div class="form-group">
                        <label for="cepPessoa">CEP</label>
                        <input id="cepPessoa" th:field="*{cep}" class="form-control mask-cep" data-digits-only="true">
                    </div>

                    <div class="form-group">
                        <label for="logradouroPessoa">Logradouro</label>
                        <input id="logradouroPessoa" th:field="*{logradouro}" class="form-control texto-maiusculo">
                    </div>

                    <div class="form-group">
                        <label for="numeroPessoa">Número</label>
                        <input id="numeroPessoa" th:field="*{numero}" class="form-control texto-maiusculo">
                    </div>

                    <div class="form-group">
                        <label for="complementoPessoa">Complemento</label>
                        <input id="complementoPessoa" th:field="*{complemento}" class="form-control texto-maiusculo">
                    </div>

                    <div class="form-group">
                        <label for="referenciaPessoa">Ponto de referência</label>
                        <input id="referenciaPessoa" th:field="*{referencia}" class="form-control texto-maiusculo">
                    </div>

                    <div class="form-group">
                        <label for="bairroPessoa">Bairro</label>
                        <input id="bairroPessoa" th:field="*{bairro}" class="form-control texto-maiusculo">
                    </div>

                    <div class="form-group">
                        <label for="cidadePessoa">Cidade</label>
                        <input id="cidadePessoa" th:field="*{cidade}" class="form-control texto-maiusculo">
                    </div>

                    <div class="form-group">
                        <label for="estadoPessoa">Estado</label>
                        <input id="estadoPessoa" th:field="*{estado}" maxlength="2"
                               class="form-control texto-maiusculo">
                    </div>

                    <div class="form-group">
                        <label for="celularPessoa">Celular</label>
                        <input id="celularPessoa" th:field="*{celular}" class="form-control mask-celular"
                               data-digits-only="true">
                    </div>

                    <div class="form-group">
                        <label for="whatsappPessoa">WhatsApp</label>
                        <input id="whatsappPessoa" th:field="*{whatsapp}" class="form-control mask-celular"
                               data-digits-only="true">
                        <label style="display:flex;gap:0.4rem;align-items:center;font-size:0.82rem;">
                            <input type="checkbox" id="whatsappMesmoCelular"> Mesmo número do celular
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="email">E-mail</label>
                        <input id="email" th:field="*{email}" type="email" class="form-control"
                               data-no-uppercase="true">
                    </div>

                    <div class="form-group">
                        <label for="jurosMensal">Juros mensal (%)</label>
                        <input id="jurosMensal" th:field="*{jurosMensal}" type="number" step="0.0001" min="0"
                               class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="multaAtraso">Multa por atraso (%)</label>
                        <input id="multaAtraso" th:field="*{multaAtraso}" type="number" step="0.0001" min="0"
                               class="form-control">
                    </div>
                </div>

                <div class="actions-row">
                    <button class="btn btn-primary" type="submit">Salvar</button>
                    <a class="btn btn-secondary" th:href="@{/pessoas}">Cancelar</a>
                </div>
            </form>
        </section>
    </main>
</div>
<script th:src="@{/js/app.js}"></script>
</body>
</html>
